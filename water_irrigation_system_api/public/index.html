<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Control the system</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="statisticsStyle.css">
</head>
<body>
<h2>Control the system</h2>
<p>Connection to ESP: <span id="connectionToMaster-status"></span></p>
<p>Current controlling mode: <span id="currentMode"></span></p>

<!-- Navigation Bar -->
<nav>
    <button class="nav-button" data-target="#directControl">Direct Control</button>
    <button class="nav-button" data-target="#CurrentState">Current State</button>
    <button class="nav-button" data-target="#manualSettings">Manual Settings</button>
    <button class="nav-button" data-target="#timeSettings">Settings by time</button>
    <button class="nav-button" data-target="#statistics">Statistics</button>
</nav>

<!-- Direct Control Section -->
<div id="directControl" class="status">
    <h3>Direct control</h3>
    <p>Pump <span><button class="toggledButton" id="pump">OFF</button></span></p>
    <p>Valve main <span><button class="toggledButton" id="valve1">OFF</button></span></p>
    <p>Valve zone 1 <span><button class="toggledButton" id="valve2">OFF</button></span></p>
    <p>Valve zone 2 <span><button class="toggledButton" id="valve3">OFF</button></span></p>
    <p>Power <span><button class="toggledButton" id="powerBtn">OFF</button></span></p>
</div>

<!-- Valves Status Section -->
<div id="CurrentState" class="status">
    <h3>Valves Status</h3>
    <div class="components"></div>
    <h3>Sensor Data</h3>
    <div class="sensors"></div>
</div>


<!-- Sensors Settings Section -->
<div id="manualSettings" class="status">
    <h3>Manual Settings</h3>
    <form id="manualSettingsForm">
        <div class="zone">
            <h4>Zone 1</h4>
            <p>Temperature Range (°C):</p>
            <p>
                <span>Min: <span class="value" data-display="temp1MinValue">10</span>°C</span>
                <span><input type="range" name="temp1Min" class="range-input" data-display="temp1MinValue" min="0" max="40" value="10" required></span>
            </p>
            <p>
                <span>Max: <span class="value" data-display="temp1MaxValue">30</span>°C</span>
                <span><input type="range" name="temp1Max" class="range-input" data-display="temp1MaxValue" min="0" max="40" value="30" required></span>
            </p>
            <p>Air Humidity (%):</p>
            <p>
                <span>Min: <span class="value" data-display="humidityAir1MinValue">30</span>%</span>
                <span><input type="range" name="humidityAir1Min" class="range-input" data-display="humidityAir1MinValue" min="0" max="100" value="30" required></span>
            </p>
            <p>
                <span>Max: <span class="value" data-display="humidityAir1MaxValue">60</span>%</span>
                <span><input type="range" name="humidityAir1Max" class="range-input" data-display="humidityAir1MaxValue" min="0" max="100" value="60" required></span>
            </p>
            <p>Ground Humidity (%):</p>
            <p>
                <span>Min: <span class="value" data-display="humidityEarth1MinValue">20</span>%</span>
                <span><input type="range" name="humidityGround1Min" class="range-input" data-display="humidityEarth1MinValue" min="0" max="100" value="20" required></span>
            </p>
            <p>
                <span>Max: <span class="value" data-display="humidityEarth1MaxValue">50</span>%</span>
                <span><input type="range" name="humidityGround1Max" class="range-input" data-display="humidityEarth1MaxValue" min="0" max="100" value="50" required></span>
            </p>
        </div>
        <input type="submit" value="Send">
    </form>
</div>

<!-- Timed Settings Section -->
<div id="timeSettings" class="status">
    <h3>Zone Settings by Time</h3>
    <form id="timeSettingsForm">
        <!-- Zone 1 -->
        <div class="zoneTimedMode" id="zone1">
            <h4>Zone 1</h4>
            <div class="schedules"></div>
            <button type="button" class="add-schedule" data-zone="1">Add Another Schedule</button>
        </div>

        <!-- Zone 2 -->
        <div class="zoneTimedMode" id="zone2">
            <h4>Zone 2</h4>
            <div class="schedules"></div>
            <button type="button" class="add-schedule" data-zone="2">Add Another Schedule</button>
        </div>

        <button type="submit">Send</button>
    </form>

    <div id="status"></div>
</div>


<!-- Statistics Section -->
<div id="statistics" class="status">
    <div id="chart"></div>
    <span style="margin-left: 30px"><button id="dateMinusDay" value="-">< </button><input value="2024-11-02" style="margin:0 5px 0 5px" type="date" name="dateRangeInput" id="dateRangeInput"><button id="datePlusDay" value="+"> ></button></span>
    <div id="tooltip" class="tooltip"></div>
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>
<script src="https://cdn.socket.io/4.7.5/socket.io.min.js" integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4=" crossorigin="anonymous"></script>
<script src="index.js"></script>
<script src="statistics.js"></script>
</body>
</html>
